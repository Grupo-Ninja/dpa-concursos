version: '3.8'

services:
  backend:
    build: ./backEnd
    container_name: antigravity-backend
    ports:
      - "8090:8090" # Porta Host : Porta Container
    volumes:
      - pb_data:/app/pb_data # Persiste o banco de dados mesmo se desligar o container
      # Se quiser editar o seed.js e ver mudan√ßa sem rebuildar, descomente abaixo:
      # - ./backEnd/seed.js:/app/seed.js 
    networks:
      - app-network

  frontend:
    build: ./frontEnd
    container_name: antigravity-frontend
    ports:
      - "3000:3000"
    volumes:
      - ./frontEnd:/app
      - /app/node_modules
    environment:
      - VITE_API_URL=http://localhost:8090
    depends_on:
      - backend
    networks:
      - app-network

volumes:
  pb_data:
    # Volume nomeado para guardar os dados do PocketBase

networks:
  app-network:
    driver: bridge
